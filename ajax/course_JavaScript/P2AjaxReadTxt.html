<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初步实现 Ajax 数据读取</title>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script>
        // window.onload = function() {
        //         document.getElementsByTagName("a")[0].onclick = function() {
        //             return false;
        //         }
        //     }

        // $(function() {
        //     $('a:eq(0)').click(function() {
        //         return false;
        //     })
        // })

        $(function() {
            //     // 1. 获取 a 节点，并为其添加 onclick 响应函数
            $('a:eq(0)').click(function() {
                // 3.创建一个 XMLHttpRequest 对象
                var request = new XMLHttpRequest();

                // 4.准备发送请求的数据:url
                var url = this.href + "?time=" + new Date();
                var method = "Get";

                // 5.调用 XMLHttpRequest 对象的 open方法
                request.open(method, url);

                // 6.调用 XMLHttpRequest 对象的 send 方法
                request.send(null);

                // 7.为 XMLHttpRequest 对象添加 onreadystatechange 响应函数
                request.onreadystatechange = function() {
                    // 8.判断响应是否完成：XMLHttpRequest 对象的 readyState 属性值为 4 的时候
                    if (request.readyState == 4) {
                        // 9.再判断响应是否可用：XMLHttpRequest 对象 status 属性值为 200
                        if (request.status == 200 || request.status == 304) {
                            // 10.打印响应结果：responseText
                            alert(request.responseText);
                        }
                    }
                }

                // 2.取消 a 节点的默认行为
                return false;

            });


        })
    </script>
</head>

<body>
    <!-- <a href="P2AjaxData.txt">P2--读取 Ajax</a> -->
    <a href="DataForAjax/P2txtData.txt">P2--读取 Ajax</a>
</body>

</html>